## VTP


<img width="687" height="539" alt="image" src="https://github.com/user-attachments/assets/924c6430-0228-45d1-94b3-e2d721a0ed47" />




#### SW1
conf t<br/>
int g0/0~g0/2<br/>
switchport trunk encapsulation dot1q<br/>
switchport mode trunk<br/>
exit<br/>
vtp mode server<br/>
vtp domain cisco<br/>

#### SW 2~4
(config)#int g0/2<br/>
(config-if)#switchport trunk encapsulation dot1q<br/>
(config-if)#switchport mode tr<br/>
(config-if)#end<br/>
sh int tr<br/>
vtp domain cisco<br/>
vtp mode client<br/>

#### SW1

conf t<br/>
vlan 10<br/>
exit<br/>
vlan 20<br/>
exit<br/>
vlan 30<br/>
exit<br/>
vlan 40<br/>
exit<br/>
vlan 50<br/>


#### SW2

conf t<br/>
int g0/1<br/>
switchport access vlan 10<br/>
int g0/2<br/>
switchport access vlan 20<br/>

#### SW3

conf t<br/>
int g0/2<br/>
switchport access vlan 30<br/>
int g0/3<br/>
switchport access vlan 40<br/>

#### SW4

conf t<br/>
int g0/3<br/>
switchport access vlan 50<br/>



### VTP Pruning

VTP Pruning (Pruning : 나뭇가지를 자르다. / Prune : 불필요한 가지를 치다.)<br/>
특정 VLAN의 호스트가 존재하지 않는 스위치로 VLAN 트래픽 차단<br/>

#### SW1

conf t<br/>
int range g0/0-2<br/>
switchport trunk allowed vlan 10,20,30,40,50<br/>
switchport trunk native vlan 999<br/>

#### SW2

conf t<br/>
int g0/0<br/>
switchport trunk allowed vlan 10,20,30,40,50<br/>
switchport trunk native vlan 999<br/>

#### SW3

conf t<br/>
int g0/1<br/>
switchport trunk allowed vlan 10,20,30,40,50<br/>
switchport trunk native vlan 999<br/>

#### SW4

conf t<br/>
int g0/2<br/>
switchport trunk allowed vlan 10,20,30,40,50<br/>
switchport trunk native vlan 999<br/>

#### SW1

conf t<br/>
vtp pruning<br/>



#### do sh int pruning

Port                Vlans pruned for lack of request by neighbor<br/>
Gi0/0               30,40,50<br/>
Gi0/1               10,20,50<br/>
Gi0/2               10,20,30,40<br/>

Port                Vlan traffic requested of neighbor<br/>
Gi0/0               30,40,50<br/>
Gi0/1               10,20,50<br/>
Gi0/2               10,20,30,40<br/>

#### do sh int trunk

Port        Mode             Encapsulation  Status        Native vlan<br/>
Gi0/0       on               802.1q         trunking      999<br/>
Gi0/1       on               802.1q         trunking      999<br/>
Gi0/2       on               802.1q         trunking      999<br/>

Port        Vlans allowed on trunk<br/>
Gi0/0       10,20,30,40,50<br/>
Gi0/1       10,20,30,40,50<br/>
Gi0/2       10,20,30,40,50<br/>

Port        Vlans allowed and active in management domain<br/>
Gi0/0       10,20,30,40,50<br/>
Gi0/1       10,20,30,40,50<br/>
Gi0/2       10,20,30,40,50<br/>

Port        Vlans in spanning tree forwarding state and not pruned<br/>
Gi0/0       10,20<br/>
Gi0/1       30,40<br/>
Gi0/2       50<br/>


#### SW1

do sh interface g0/0 pruning <br/>
<br/>
<br/>

- VTP 서버 모드 스위치에서만 설정 가능 → VTP Pruning   ,  no vtp pruning<br/>
﻿- 트렁크 포트에 VTP 프루닝 비활성화 → (config-if)switchport trunk pruning vlan none<br/>
- 트렁크 포트에 특정 VLAN에만 프루닝 적용 → (config-if)switchport trunk pruning vlan 10,20<br/>
- 트렁크 포트에 프루닝 적용 제외 VLAN → (config-if)switchport trunk pruning remove 50<br/>
- 트렁크 포트에 프루닝 적용 추가 VLAN → (config-if)switchport trunk pruning add 50<br/>
























































































