
## web server https

인증서 -> 서버에 연결

dnf install -y mod_ssl openssl

man openssl
openssl req -x509 -nodes -days 365 

openssl req -x509 -nodes -days 365 -newkey rsa:2048 -keyout /etc/pki/tls/private/apache-selfsigned.key -out /etc/pki/tls/certs/apache-selfsigned.crt -subj "/C=KR/ST=Seoul/L=Seoul/O=Practice/OU=IT/CN=192.168.111.200"

키와 인증서를 아파치 웹 서버에 연동

vi /etc/httpd/conf.d/ssl.conf

<img width="562" height="178" alt="image" src="https://github.com/user-attachments/assets/07334eb0-f632-4249-bafb-fe8bd98a8a23" />

:85행

SSLCertificateFile /etc/pki/tls/certs/apache-selfsigned.crt

SSLCertificateKeyFile /etc/pki/tls/private/apache-selfsigned.key

systecmtl restart httpd

firewall-cmd --add-service=http<br/>
firewall-cmd --add-service=https<br/>

https://192.168.111.200

오류는 무시하고 진입



사설 인증 기관처럼 Root CA 생성

시작 - certmgr.msc

openssl genrsa -out /etc/pki/tls/private/MyRootCA.key 2048

인증 기관으로서의 인증서 생성

openssl req -x509 -new -nodes -key /etc/pki/tls/private/MyRootCA.key -sha256 -days 3650 -out /etc/pki/tls/certs/MyRootCA.pem -subj "/C=KR/ST=Seoul/L=Seoul/O=4gl/CN=MY-Private-Root-CA"


key 확인

ls /etc/pki/tls/private/<br/>
ls /etc/pki/tls/certs/<br/>

서버용 인증서

openssl genrsa -out /etc/pki/tls/private/server.key 2048<br/>
openssl req -new -key /etc/pki/tls/private/server.key -out /etc/pki/tls/certs/server.csr -subj "/C=KR/ST=Seoul/L=Seoul/O=Practice/CN=192.168.111.144"

주체 대체 이름<br/>
SAN<br/>
Subject Alternative Name<br/>


vi server_ext.cnf<br/>

<img width="326" height="44" alt="image" src="https://github.com/user-attachments/assets/4a023162-b761-4255-816d-216e1613a503" />

subjectAltName = IP:192.168.111.200

openssl x509 -req -in /etc/pki/tls/certs/server.csr -CA /etc/pki/tls/certs/MyRootCA.pem -CAkey /etc/pki/tls/private/MyRootCA.key -CAcreateserial -out /etc/pki/tls/certs/server.crt -days 365 -sha256 -extfile server_ext.cnf

vi /etc/httpd/conf.d/ssl.conf

SSLCertificateFile /etc/pki/tls/certs/server.crt

SSLCertificateKeyFile /etc/pki/tls/private/server.key


<img width="601" height="295" alt="image" src="https://github.com/user-attachments/assets/65483786-b6c3-4564-89b1-49ea500f61a0" />

systemctl restart httpd

firewall-cmd --add-service={http,https}


윈도우에서도 인증하기위해

/etc/pki/tls/certs/MyRootCA.pem

윈도우 certmgr.msc에 인증서.pem 등록

구글 등의 브라우저에서 접속 테스트<br/>
https://192.168.111.200<br/>

이후에 GCP나 AWS에서 SSL 인증서 발급







