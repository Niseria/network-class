
<img width="1244" height="712" alt="image" src="https://github.com/user-attachments/assets/4ed00b06-0b99-4a52-babd-0fada4530624" />

#### ASAv 설정

conf t<br/>
int g0/0<br/>
ip add 192.168.10.2 255.255.255.0<br/>
no sh<br/>
nameif outside<br/>
security-level 0<br/>

int g0/1<br/>
ip add 20.1.1.254 255.255.255.0<br/>
no sh<br/>
nameif inside<br/>
security-level 1<br/>

int g0/2<br/>
ip add 30.1.1.254 255.255.255.0<br/>
no sh<br/>
nameif dmz<br/>
security-level 50<br/>
exit<br/>

ciscoasa(config)# access-list DMZ_IN extended permit icmp any any<br/>
ciscoasa(config)# access-group DMZ_IN in interface dmz<br/>

object network INSIDE<br/>
subnet 20.1.1.0 255.255.255.0<br/>
nat (inside,outside) dynamic interface<br/>

do sh run nat<br/>

object network DMZ-WEB-SERVER1<br/>
host 30.1.1.1<br/>
nat (DMZ,outside) static 192.168.10.11<br/>

object network DMZ-WEB-SERVER2<br/>
host 30.1.1.2<br/>
nat (DMZ,outside) static 192.168.10.12<br/>
end<br/>

sh run object<br/>


object network BRANCH1<br/>
 subnet 192.168.20.0 255.255.255.0<br/>
object network BRANCH2<br/>
 subnet 192.168.30.0 255.255.255.0<br/>
object service HTTP_SVC<br/>
 service tcp destination eq www <br/>

FW(config)# sh run access-list <br/>
access-list OUT2IN extended permit tcp object BRANCH1 object DMZ-WEB-SERVER1 eq www <br/>
access-list OUT2IN extended permit object HTTP_SVC object BRANCH2 object DMZ-WEB-SERVER2 <br/>
FW(config)# sh run access-group <br/>
access-group OUT2IN in interface outside<br/>



웹서버관리자 포트번호를 8080으로 수정함, 방화벽 관리자 서비스 객체를 다음과 같이 수정<br/>
object service HTTP_SVC<br/>
 service tcp destination eq 8080<br/>

웹서버관리자 포트번호를 8080, 8081 까지 추가로 확장함 →  방화벽 관리자 서비스 객체를 다음과 같이 수정<br/>
→ 여러개 포트에서 접근가능하게 서비스들을 object-group으로 묶어보자.<br/>
FW(config)# object-group service HTTP_MULTI_PORT<br/>
FW(config-service-object-group)# service-object tcp eq 8081<br/>
FW(config-service-object-group)# service-object tcp eq 8080<br/>

FW(config)# sh run access-list <br/>
access-list OUT2IN extended permit object HTTP_SVC object BRANCH2 object DMZ-WEB-SERVER2 <br/>
access-list OUT2IN extended permit object-group HTTP_MULTI_PORT object BRANCH1 object DMZ-WEB-SERVER1 <br/>

FW(config)# sh run object service <br/>
object service HTTP_SVC<br/>
 service tcp destination eq 8080 <br/>

FW(config)# sh run object-group   <br/>
object-group service HTTP_MULTI_PORT<br/>
 service-object tcp destination eq 8081 <br/>
 service-object tcp destination eq 8080 <br/>
FW(config)# <br/>
<br/>
root@NetworkAutomation-2:~# python3 -m http.server 8080<br/>


#### 이번에는 포트포워딩을 해보자.

object network DMZ-WEB-SERVER2<br/>
 nat (DMZ,outside) static interface service tcp 8082 8082   ← 기존 nat 삭제 후, 다음과 같이 추가 <br/>

다음과 같이 포트별로 객체를 추가한다.  포트별로 객체를 분리한다.<br/>
object network DMZ-WEB-SERVER1-8080<br/>
 nat (DMZ,outside) static interface service tcp 8080 8080 <br/>
object network DMZ-WEB-SERVER1-8081<br/>
 nat (DMZ,outside) static interface service tcp 8081 8081 <br/>











































































































































































































































































































